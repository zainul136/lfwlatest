{{-- Extends layout --}}
@extends('admin.layout.default')



{{-- Content --}}
@section('content')
	<div class="container-fluid">
		<div class="form-head d-flex align-items-center flex-wrap mb-sm-5 mb-3">
			<h2 class="font-w600 mb-0 text-black">Deceased Confirmation</h2>
			<!-- <a href="javascript:void(0);" class="btn btn-outline-secondary ms-auto"><i class="las la-calendar scale5 me-2"></i>Filter Periode</a> -->
		</div>
		<div class="row request-module-row">
			<div class="col-xl-12">
				<div class="table-responsive table-hover fs-14">
					<table class="table display mb-4 dataTablesCard short-one card-table text-black" id="example6">
						<thead>
						<tr>
							<th>Select</th>
							<th>Deceased Person</th>
							<th>Date of Death</th>
							<th>Place of Death</th>
							<th>Death Certificate</th>
							<th>Actions</th>
						</tr>
						</thead>
						<tbody>
						@if(isset($deceaseUsers))
							@foreach($deceaseUsers as $deceaseUser)
								<tr>
										<?php
										$userProfileImages = \App\Models\UserInformation::query()->where('user_id','=',$deceaseUser->user->id)->first();
										$profilePicture = isset($userProfileImages->profile_picture) ?
												asset("user_media/{$deceaseUser->user->id}/profile_picture/{$userProfileImages->profile_picture}") :
												asset('storage/assets/images/profile.jpeg');
										?>
									<td><input type="checkbox"></td>
									<td>

										<div class="d-flex align-items-center" style="gap: 8px;">
											<img src="{{$profilePicture}}" alt="" width="40" height="40" style="border-radius: 50%">
											<div>
												<p class="mb-0 font-w500">{{$deceaseUser->user->first_name .' '. $deceaseUser->user->last_name ??''}}</p>
												<p class="mb-0" style="font-size: 14px;">{{$deceaseUser->user->email ?? ''}}</p>
											</div>
										</div>
									</td>
									<td> {{ \Carbon\Carbon::parse($deceaseUser->date_of_death)->format('M j, Y')  ??''}}</td>
									<td>{{$deceaseUser->place_of_death ??''}}</td>
									<td class="table-action-tr">
										<a href='{{ asset("death_certificate/{$deceaseUser->death_certificate}") }}'
										   target="_blank" class="text-black font-w600"><svg class="table-action-tr-first"
																							 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
												<path
														d="M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z" />
											</svg>
										</a>
										<a href="{{ route('download', ['filename' => $deceaseUser->death_certificate]) }}">
											<svg width="19" height="18" viewBox="0 0 19 18" fill="none"
												 xmlns="http://www.w3.org/2000/svg">
												<g clip-path="url(#clip0_39_7916)">
													<path d="M1.16309 11.1375C1.31227 11.1375 1.45534 11.1968 1.56083 11.3023C1.66632 11.4077 1.72559 11.5508 1.72559 11.7V14.5125C1.72559 14.8109 1.84411 15.097 2.05509 15.308C2.26607 15.519 2.55222 15.6375 2.85059 15.6375H16.3506C16.649 15.6375 16.9351 15.519 17.1461 15.308C17.3571 15.097 17.4756 14.8109 17.4756 14.5125V11.7C17.4756 11.5508 17.5348 11.4077 17.6403 11.3023C17.7458 11.1968 17.8889 11.1375 18.0381 11.1375C18.1873 11.1375 18.3303 11.1968 18.4358 11.3023C18.5413 11.4077 18.6006 11.5508 18.6006 11.7V14.5125C18.6006 15.1092 18.3635 15.6815 17.9416 16.1035C17.5196 16.5254 16.9473 16.7625 16.3506 16.7625H2.85059C2.25385 16.7625 1.68155 16.5254 1.2596 16.1035C0.837639 15.6815 0.600586 15.1092 0.600586 14.5125V11.7C0.600586 11.5508 0.659849 11.4077 0.765338 11.3023C0.870828 11.1968 1.0139 11.1375 1.16309 11.1375Z" fill="#23A403" />
													<path d="M9.20207 13.3358C9.25432 13.3881 9.31639 13.4297 9.38473 13.4581C9.45307 13.4864 9.52633 13.501 9.60032 13.501C9.67431 13.501 9.74757 13.4864 9.81591 13.4581C9.88425 13.4297 9.94632 13.3881 9.99857 13.3358L13.3736 9.96075C13.4792 9.85513 13.5385 9.71187 13.5385 9.5625C13.5385 9.41313 13.4792 9.26987 13.3736 9.16425C13.2679 9.05863 13.1247 8.99929 12.9753 8.99929C12.8259 8.99929 12.6827 9.05863 12.5771 9.16425L10.1628 11.5796V1.6875C10.1628 1.53832 10.1036 1.39524 9.99807 1.28975C9.89258 1.18426 9.7495 1.125 9.60032 1.125C9.45114 1.125 9.30806 1.18426 9.20257 1.28975C9.09708 1.39524 9.03782 1.53832 9.03782 1.6875V11.5796L6.62357 9.16425C6.51795 9.05863 6.37469 8.99929 6.22532 8.99929C6.07595 8.99929 5.93269 9.05863 5.82707 9.16425C5.72145 9.26987 5.66211 9.41313 5.66211 9.5625C5.66211 9.71187 5.72145 9.85513 5.82707 9.96075L9.20207 13.3358Z" fill="#23A403" />
												</g>
												<defs>
													<clipPath id="clip0_39_7916">
														<rect width="18" height="18" fill="white"
															  transform="translate(0.600586)" />
													</clipPath>
												</defs>
											</svg>
										</a>
									</td>

									<td>
										<div class="table-action-tr">
											<a href="{{ route('deceased-send-notification',$deceaseUser->id) }}">
												<svg width="18" height="18" viewBox="0 0 18 18" fill="none"
													 xmlns="http://www.w3.org/2000/svg">
													<g clip-path="url(#clip0_61_7041)">
														<path d="M16.2554 13.915C15.7732 13.4852 15.3511 12.9924 15.0004 12.45C14.6175 11.7013 14.388 10.8836 14.3254 10.045V7.575C14.3287 6.2578 13.8509 4.98473 12.9818 3.99498C12.1126 3.00523 10.912 2.36693 9.60539 2.2V1.555C9.60539 1.37796 9.53506 1.20818 9.40988 1.083C9.2847 0.957823 9.11492 0.887497 8.93789 0.887497C8.76086 0.887497 8.59108 0.957823 8.4659 1.083C8.34072 1.20818 8.27039 1.37796 8.27039 1.555V2.21C6.97552 2.38896 5.78938 3.03112 4.93165 4.01755C4.07393 5.00398 3.60276 6.26782 3.60539 7.575V10.045C3.54277 10.8836 3.31328 11.7013 2.93039 12.45C2.58583 12.9912 2.17049 13.4839 1.69539 13.915C1.64206 13.9619 1.59931 14.0195 1.57 14.0842C1.54069 14.1488 1.52548 14.219 1.52539 14.29V14.97C1.52539 15.1026 1.57807 15.2298 1.67184 15.3236C1.76561 15.4173 1.89278 15.47 2.02539 15.47H15.9254C16.058 15.47 16.1852 15.4173 16.2789 15.3236C16.3727 15.2298 16.4254 15.1026 16.4254 14.97V14.29C16.4253 14.219 16.4101 14.1488 16.3808 14.0842C16.3515 14.0195 16.3087 13.9619 16.2554 13.915ZM2.56539 14.47C3.0306 14.0206 3.44019 13.517 3.78539 12.97C4.2677 12.0657 4.54911 11.068 4.61039 10.045V7.575C4.59056 6.98902 4.68885 6.40503 4.89941 5.85783C5.10997 5.31063 5.4285 4.81139 5.83601 4.38985C6.24353 3.96831 6.73171 3.63308 7.27148 3.40413C7.81125 3.17519 8.39157 3.0572 8.97789 3.0572C9.56421 3.0572 10.1445 3.17519 10.6843 3.40413C11.2241 3.63308 11.7122 3.96831 12.1198 4.38985C12.5273 4.81139 12.8458 5.31063 13.0564 5.85783C13.2669 6.40503 13.3652 6.98902 13.3454 7.575V10.045C13.4067 11.068 13.6881 12.0657 14.1704 12.97C14.5156 13.517 14.9252 14.0206 15.3904 14.47H2.56539Z" fill="#DE2F08" />
														<path d="M9.00016 17.14C9.31512 17.1327 9.61738 17.0143 9.85346 16.8057C10.0895 16.5971 10.2442 16.3117 10.2902 16H7.66016C7.70739 16.3202 7.86932 16.6123 8.11581 16.822C8.3623 17.0317 8.67657 17.1447 9.00016 17.14Z" fill="#DE2F08" />
													</g>
													<defs>
														<clipPath id="clip0_61_7041">
															<rect width="18" height="18" fill="white" />
														</clipPath>
													</defs>
												</svg>

											</a>
											@if(isset($deceaseUser->recovery_confirmation))
											<a href="{{route('details-notification-decease-person',$deceaseUser->id)}}">
												<svg width="19" height="18" viewBox="0 0 19 18" fill="none"
													 xmlns="http://www.w3.org/2000/svg">
													<path
															d="M15.2256 5.76562H12.835V3.9375C12.835 3.07969 12.4942 2.25701 11.8876 1.65045C11.2811 1.04389 10.4584 0.703125 9.60059 0.703125C8.74278 0.703125 7.9201 1.04389 7.31354 1.65045C6.70697 2.25701 6.36621 3.07969 6.36621 3.9375V5.76562H3.97559C3.71451 5.76562 3.46413 5.86934 3.27953 6.05394C3.09492 6.23855 2.99121 6.48893 2.99121 6.75V14.625C2.99121 14.8861 3.09492 15.1365 3.27953 15.3211C3.46413 15.5057 3.71451 15.6094 3.97559 15.6094H15.2256C15.4867 15.6094 15.737 15.5057 15.9216 15.3211C16.1062 15.1365 16.21 14.8861 16.21 14.625V6.75C16.21 6.48893 16.1062 6.23855 15.9216 6.05394C15.737 5.86934 15.4867 5.76562 15.2256 5.76562ZM7.20996 3.9375C7.20996 3.30347 7.46183 2.6954 7.91016 2.24707C8.35849 1.79874 8.96655 1.54688 9.60059 1.54688C10.2346 1.54688 10.8427 1.79874 11.291 2.24707C11.7393 2.6954 11.9912 3.30347 11.9912 3.9375V5.76562H7.20996V3.9375ZM15.3662 14.625C15.3662 14.6623 15.3514 14.6981 15.325 14.7244C15.2987 14.7508 15.2629 14.7656 15.2256 14.7656H3.97559C3.93829 14.7656 3.90252 14.7508 3.87615 14.7244C3.84978 14.6981 3.83496 14.6623 3.83496 14.625V6.75C3.83496 6.7127 3.84978 6.67694 3.87615 6.65056C3.90252 6.62419 3.93829 6.60938 3.97559 6.60938H15.2256C15.2629 6.60938 15.2987 6.62419 15.325 6.65056C15.3514 6.67694 15.3662 6.7127 15.3662 6.75V14.625ZM10.3037 10.6875C10.3037 10.8266 10.2625 10.9625 10.1852 11.0781C10.108 11.1938 9.99814 11.2839 9.86966 11.3371C9.74118 11.3903 9.59981 11.4042 9.46341 11.3771C9.32702 11.35 9.20174 11.283 9.1034 11.1847C9.00507 11.0864 8.9381 10.9611 8.91097 10.8247C8.88384 10.6883 8.89777 10.5469 8.95098 10.4184C9.0042 10.2899 9.09432 10.1801 9.20995 10.1029C9.32558 10.0256 9.46152 9.98438 9.60059 9.98438C9.78707 9.98438 9.96591 10.0585 10.0978 10.1903C10.2296 10.3222 10.3037 10.501 10.3037 10.6875Z"
															fill="#99DDCC" stroke="#99DDCC" stroke-width="0.5" />
													<rect x="11.5693" y="3.9375" width="2.10938" height="1.82812"
														  fill="white" />
												</svg>
											</a>
											@endif
										</div>
									</td>

								</tr>
							@endforeach
						@endif
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
@endsection
